<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PricePulse | Smart Shopping Comparison</title>

    <!-- This script protects the page. It MUST be in the <head> -->
    <script src="js/protect.js" defer></script>

     <!-- NEW: Navigation Logic -->
    <script src="js/nav.js" defer></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Animated Background -->
    <div class="bg-animation">
      <div class="wave"></div>
      <div class="wave"></div>
    </div>

    <!-- Navigation Bar with Profile Menu -->
    <nav>
      <input type="checkbox" id="nav-toggle" />
      <div class="logo">
        <i class="fas fa-robot"></i><strong>PricePulse</strong>
      </div>
      <ul class="links">
        <li id="home"><a href="index.html">Home</a></li>
        <li id="about"><a href="about.html">About</a></li>
        <li id="contact"><a href="contact.html">Contact</a></li>
        
        <!-- AUTH LINKS START -->
        <li id="authLink"><a href="auth.html">Login / Register</a></li>
        
        <!-- Profile Menu (Initially Hidden) -->
          <li class="profile-menu" id="profileMenu" style="display: none;">
      <button class="profile-btn" id="profileBtn">
        <i class="fas fa-user"></i>
      </button>
      <div class="profile-dropdown" id="profileDropdown">
        
        <!-- NEW: User Info Header -->
        <div class="dropdown-header">
          <p class="dropdown-name" id="dropdownUserName">User Name</p>
          <p class="dropdown-email" id="dropdownUserEmail">user@example.com</p>
        </div>
        
        <!-- Logout Link -->
        <a href="#" class="logout-link" id="logoutBtn">
          <i class="fas fa-sign-out-alt"></i> Logout
        </a>

      </div>
    </li>
        <!-- AUTH LINKS END -->
        
      </ul>
      <label for="nav-toggle" class="icon-burger">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
      </label>
    </nav>

    <!-- Main Container -->
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="logo">
          <i class="fas fa-robot"></i>
          <span>Price<span>Pulse</span></span>
        </div>
        <p class="tagline">AI-powered shopping intelligence</p>
      </header>

      <!-- Search Section -->
      <section class="search-section">
        <div class="search-box">
          <input
            type="text"
            id="searchInput"
            placeholder="Search for products..."
          />
          <button id="searchBtn">
            <i class="fas fa-search"></i> <span>Compare Prices</span>
          </button>
        </div>

        <div class="suggestions">
          <span id="suggestionText"
            >Try: "wireless headphones", "smartphone", or "laptop"</span
          >
        </div>
      </section>

      <!-- Filters -->
      <section class="filters">
        <div class="filter-group">
          <label>Sort By:</label>
          <select id="sortSelect">
            <option value="price_asc">Price: Low to High</option>
            <option value="price_desc">Price: High to Low</option>
            <option value="rating">Best Rating</option>
            <option value="discount">Highest Discount</option>
          </select>
        </div>

        <div class="filter-group">
          <label>Stores:</label>
          <div class="store-options">
            <button class="store-btn active" data-store="all">
              <i class="fas fa-store"></i> All
            </button>
            <button class="store-btn" data-store="amazon">
              <i class="fab fa-amazon"></i> Amazon
            </button>
            <button class="store-btn" data-store="ebay">
              <i class="fab fa-ebay"></i> eBay
            </button>
            <button class="store-btn" data-store="walmart">
              <i class="fas fa-store"></i>Walmart
            </button>
          </div>
        </div>
      </section>

      <!-- NEW SEARCH HISTORY SECTION -->
      <section class="history-section" id="historySection" style="display: none;">
          <h3>Your Recent Searches</h3>
          <ul id="historyList">
              <!-- History items will be added here by JavaScript -->
          </ul>
      </section>

      <!-- Results -->
      <section class="results-section">
        <div class="loading" id="loading">
          <div class="loader"></div>
          <p>Scanning stores...</p>
        </div>

        <div class="results-container" id="resultsContainer">
          <!-- The welcome message or product cards will appear here -->
        </div>
      </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <p>Â© 2023 PricePulse | Data updates every 6 hours</p>
    </footer>

    <script src="js/script.js"></script>
  </body>
</html>